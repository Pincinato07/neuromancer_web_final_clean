<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Carregamento de Assets</title>
    <style>
        body { font-family: monospace; background-color: #111; color: #0f0; padding: 10px; }
        .asset { margin-bottom: 5px; padding: 3px; border: 1px solid #333; }
        .success { border-left: 5px solid #0f0; }
        .error { border-left: 5px solid #f00; color: #f00; }
        #results { max-height: 80vh; overflow-y: auto; border: 1px solid #555; padding: 5px; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Teste de Carregamento de Assets WebP</h1>
    <p>Tentando carregar cada asset individualmente...</p>
    <div id="results"></div>

    <script>
        const assetsToTest = [
            'assets/sprites/chiba_city_bg.webp',
            'assets/sprites/core_bg.webp',
            'assets/sprites/data_nodes.webp',
            'assets/sprites/ending_new_path.webp',
            'assets/sprites/ending_separation.webp',
            'assets/sprites/ending_union.webp',
            'assets/sprites/flatline.webp',
            'assets/sprites/hack_interface.webp',
            'assets/sprites/matrix_zone_bg.webp',
            'assets/sprites/npc_contact.webp',
            'assets/sprites/player_idle.webp',
            'assets/sprites/player_walk.webp',
            'assets/sprites/sombra.webp',
            'assets/sprites/straylight_bg.webp',
            'assets/sprites/terminal.webp',
            'assets/sprites/wintermute.webp',
            'assets/sprites/ziggurat_tower_bg.webp'
        ];

        const resultsDiv = document.getElementById('results');
        let loadedCount = 0;
        let errorCount = 0;

        function logResult(message, isError = false) {
            console.log(message);
            const entry = document.createElement('div');
            entry.textContent = message;
            entry.classList.add('asset');
            if (isError) {
                entry.classList.add('error');
            } else {
                entry.classList.add('success');
            }
            resultsDiv.appendChild(entry);
            resultsDiv.scrollTop = resultsDiv.scrollHeight; // Auto-scroll
        }

        function testAsset(url) {
            return new Promise((resolve) => {
                logResult(`Tentando carregar: ${url}`);
                const img = new Image();
                img.onload = () => {
                    logResult(`SUCESSO: ${url} carregado.`);
                    loadedCount++;
                    resolve(true);
                };
                img.onerror = (err) => {
                    logResult(`ERRO: Falha ao carregar ${url}. Detalhes: ${err}`, true);
                    errorCount++;
                    resolve(false);
                };
                img.src = url; // Inicia o carregamento
            });
        }

        async function runTests() {
            logResult(`Iniciando teste para ${assetsToTest.length} assets...`);
            for (const assetUrl of assetsToTest) {
                await testAsset(assetUrl);
            }
            logResult(`--- Teste Concluído ---`);
            logResult(`Total Carregados: ${loadedCount}`);
            logResult(`Total com Erros: ${errorCount}`, errorCount > 0);
            if (errorCount > 0) {
                 logResult(`ATENÇÃO: ${errorCount} asset(s) falharam ao carregar! Verifique os logs acima.`, true);
            }
        }

        runTests();
    </script>
</body>
</html>

